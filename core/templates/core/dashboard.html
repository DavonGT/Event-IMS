{% extends 'core/base.html' %}

{% block title %}Dashboard{% endblock %}

{% block content %}
  <div class="dashboard-container">
    {% comment %} <h1>{{ user_role }} Dashboard</h1> {% endcomment %}

    {% comment %} ma appear in ngin admin {% endcomment %}
    {% comment %} {% if user_role == 'Admin' or user_role == 'Organizer' %}
      <p>Admin/Organizer ka</p>    
    {% else %}
      <p>Studyante ka lang</p>
    {% endif %} {% endcomment %}

    <div id="calendar"></div>
  </div>

  <style>
    #calendar {
      max-width: 900px;
      margin: 2rem auto;
      padding: 20px;
      background: white;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
  </style>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const calendarEl = document.getElementById('calendar');
      const eventsData = JSON.parse('{{ events_json|safe }}');
      
      // Transform your events data to FullCalendar format
      const calendarEvents = eventsData.map(event => {
        return {
          title: event.name,  // Assuming your event has a 'name' property
          date: event.date   // Assuming your event has a 'date' property
          // Add other properties if needed (color, description, etc.)
        };
      });
  
      const calendar = new FullCalendar.Calendar(calendarEl, {
        initialView: 'dayGridMonth',
        height: 'auto',
        events: calendarEvents  // Use the transformed events here
      });
      
      calendar.render();
    });
  </script>
{% endblock %}
